<%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>

  <%= f.error_notification %>

  <div class="sm:px-8 md:px-24 lg:px-50 xl:px-64">
    <div class="space-y-8 divide-y divide-gray-200">
      <div class="pt-8">
        <div>
          <h3 class="text-lg leading-6 font-medium text-gray-900">
            Modifier mon profil
          </h3>
        </div>
        <div class="mt-6">
          <div class="">
            <label for="email" class="block text-sm font-medium text-gray-700">
              Email
            </label>
            <div class="my-2">
              <%= f.input :email, required: true, autofocus: true, label: false, :input_html => { :class => "shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md p-3 py-2" } %>
            </div>
          </div>
          <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
            <p>Currently waiting confirmation for: <%= resource.unconfirmed_email %></p>
          <% end %>

          <div x-data="{isActive: false}">

            <button @click.prevent="isActive = !isActive" class="text-sm text-indigo-500 mb-4">Changer mon mot de passe</button>
            
            <div x-show="isActive"
                x-transition:enter="transition ease-out duration-100"
                x-transition:enter-start="transform opacity-0 scale-95"
                x-transition:enter-end="transform opacity-100 scale-100"
                x-transition:leave="transition ease-in duration-75"
                x-transition:leave-start="transform opacity-100 scale-100"
                x-transition:leave-end="transform opacity-0 scale-95"   >
                <label for="user_password" class="block text-sm font-medium text-gray-700">
                  Nouveau mot de passe
                </label>
                <div class="my-2">
                  <%= f.input :password,
                    hint: "Laisser vide si vous ne souhaitez pas changer votre mot de passe",
                    required: false,
                    label: false,
                    input_html: { autocomplete: "new-password", class: "shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md p-3 py-2" } %>
                </div>
                <label for="user_password_confirmation" class="block text-sm font-medium text-gray-700">
                  Confirmation du nouveau mot de passe
                </label>
                <div class="my-2">
                <%= f.input :password_confirmation,
                  required: false,
                  label: false,
                  input_html: { autocomplete: "new-password", class: "shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md p-3 py-2" } %>
              </div>
            </div>

            <label for="user_current_password" class="block text-sm font-medium text-gray-700">
              Mot de passe actuel
            </label>
            <div class="my-2">
              <%= f.input :current_password,
                hint: "Votre mot de passe actuel est requis pour valider les changements",
                required: true,
                label: false,
                input_html: { autocomplete: "current-password", class: "shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md p-3 py-2" } %>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="pt-5">
      <div class="flex items-center">
        <div class="flex justify-end ml-auto">
          <%= link_to "Annuler", :back, class: "bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" %>
          <%= f.button :submit, "Modifier", class: "ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"%> 
        </div>
      </div>
    </div>
  </div>
<% end %>


